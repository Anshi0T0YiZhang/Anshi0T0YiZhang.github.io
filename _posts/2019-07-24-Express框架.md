# **Express**

[TOC]

## **安装：**

```
npm install express --save
npm install body-parser --save
npm install cookie-parser --save
npm install multer --save
```

## 引入

```js
var express=require('express');
var app=express();
var server=require('http').Server(app);
var port=3000;
// var server=require('http').Server(require('express')());
server.listen(port,function(){
    
})
// 设置框架模板引擎
app.set('view-engine','ejs');
// 设置静态目录
app.use(express.static('./'));
```

## 路由的使用

```js
app.get('/',function(req,res){
    req.query; // get参数
})
app.post('/',function(req,res){
    
})
app.all('/',function(req,res){
    
})
app.delete('/',function(req,res){
    
})
app.get(/^\/(\d{10})\/(\w+)$/,function(req,res){
    req.params[0]; // 参数
    req.params[1]; // 参数
})
app.get('/sdu/:name/:grade',function(req,res){
    req.params.name; // 参数
    req.params.grade; // 参数
})
```

## 中间件的使用

```js
// 中间件的使用
app.get('/',function(req,res,next){
	res.write('hello');
	next();
})
app.get('/',function(req,res,next){
	res.write('hi');
	res.end();
})
// 全局中间件
app.use(function(req,res,next){
    console.log('全局中间件');
    next();
})
// 中间件
app.use('/baseUrl',function(req,res){
    req.originalUrl; // 完整路径
    req.baseUrl; // 路径'/baseUrl'
    req.path; // originalUrl-baseUrl
})
```

## POST数据的处理

```js
var bodyParser=require('body-parser');
app.use(bodyParser.urlencoded({extened:false}));
app.post('/',function(req,res){
    req.body; // post参数，对象类型
})
```

