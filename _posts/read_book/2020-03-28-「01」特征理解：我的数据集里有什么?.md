---
title: "「01」特征理解：我的数据集里有什么?"
subtitle: "《特征工程入门与实践》"
layout: post
author: "echisenyang"
header-style: text
hidden: true
catalog: true
tags:
  - book
  - 《特征工程入门与实践》
---



## 特征理解：我的数据集里有什么?

> 特征工程（feature engineering）是这样一个过程：将数据转换为能更好地表示潜 在问题的特征，从而提高机器学习性能。

> 本章概要：
>
> 1）结构化数据与非结构化数据； 
> 
> 2）定量数据与定性数据；
> 
> 3）数据的 4 个等级； 
> 
> 4）探索性数据分析和数据可视化； 
> 
> 5）描述性统计。

### 1）数据结构的有无

- **结构化（有组织）数据**：可以分成观察值和特征的数据，一般以表格的形式组织（行是 观察值，列是特征）。
- **非结构化（无组织）数据** ：作为自由流动的实体，不遵循标准组织结构（例如表格）的数据。通常，非结构化数据在我们看来是一团数据，或只有一个特征（列）。比如服务器日志。

### 2）定量数据和定性数据

- **定量数据**本质上是数值，应该是衡量某样东西的数量。

  - **双周最高工资**：定量列，代表某个部门的平均最高工资

    此列是定量的，因为其中的值是数，代表某人每两周的工资；数据类型是浮点数，因为进行了强制转换

- **定性数据**本质上是类别，应该是描述某样东西的性质。

  - **工作种类**：工资对应的部门

    **此列肯定是定性的，因为代码代表一个部门，而不是数量**；数据类型是对象，Pandas 会把字符串归为此类

```python
# 查看前几行 
salary_ranges.head()
# 查看数据有多少行，是否有缺失值，以及每列的数据类型 
		# object, int, float类型
salary_ranges.info()
# 另一种计算缺失值数量的方法 
salary_ranges.isnull().sum()
# 显示描述性统计 
		# describe 方法默认描述定量列
salary_ranges.describe() 
```

> hint💡
>
> - 当处理定量数据时，一 般使用整数或浮点数作为类型（最好使用浮点数）；定性数据则一般使用字符串或 Unicode 对象。
> - 为了进一步研究定量数据和定性数据，我们开始研究数据的 4 个等级

### 3）数据的 4 个等级

我们已经可以将数据分为定量和定性的，但是还可以继续分类。数据的 4 个等级是：

- **定类等级（nominal level）**

  - 定类等级是数据的第一个等级，其结构最弱。这个等级的数据**只按名称分类**。*例如，血型（A、 B、O 和 AB 型）、动物物种和人名。这些数据都是定性的。其他的例子包括：在上面“旧金山工作工资”的数据集中，工作种类处于定类等级*；

  > ⭕️ 可以进行的操作：
  >
  > 1）可以用 Pandas 的 value_counts 方法进行计数，出现最多的工作种类是 00000，意味着这个种类是众数，即最多的类别；
  >
  > 2）可以使用条形图和饼图。

- **定序等级（ordinal level）**

  - 定类等级为我们提供了很多进一步探索的方法。和定类等级一样，**定序等级的天然数据属性仍然是类别**，即使用数来表示类别也是如此。*例如，考试的成绩（F、D、C、B、A）。*

  > 定序等级继承了定类等级的所有属性，而且**有重要的附加属性**:
  >
  > 1）定序等级的数据可以**自然排序** ；
  >
  > 2）这意味着，**可以认为列中的某些数据比其他数据更好或更大**。

  > ⭕️ 可以进行的操作：
  >
  > 1）不仅可以继续使用条形图和饼图， 而且因为**能排序和比较，所以能计算中位数和百分位数**。对于中位数和百分位数，我们可以绘制 **茎叶图和箱线图**。
  >
  > 2）*如数据字典所述，Q7A_ART 是关于艺术品和展览的。可能的选择是 0、1、2、3、4、5、6，每个数字都有含义。然而我们需要知道，虽然这些值是数， 但每个数其实代表的是类别，所以该数据是定性的，更具体地说，是属于定序等级。如果删除 0 和 6 这两个类别，剩下的 5 个有序类别类似于餐厅的评分：*
  >
  > ```python
  > # 只考虑 1～5 
  > art_ratings = art_ratings[(art_ratings>=1) & (art_ratings<=5)]
  > # 将值转换为字符串 
  > art_ratings = art_ratings.astype(str)
  > ## 现在定序数据的格式是正确的，可以进行可视化
  > ```

- **定距等级（interval level）**

  - 我们开始加大火力了。**在定类和定序等级，我们一直在处理定性数据。即使其内容是数，也不代表真实的数量。**在定距等级，我们摆脱了这个限制，开始研究定量数据。

  > **差值也将变得有意义**：**在定距等级，数值数据不仅可以像定序等级的数据一样排序，而且值之间的差异也有意义。**这意味着，在定距等级， 我们不仅可以对值进行**排序和比较，而且可以加减**。*对温度做差值研究美国从 18 世纪至今平均温度上升多少这个问题*
  >
  > ```python
  > # 用 groupby 清除年份的大部分噪声
  > climate_sub_us.groupby('year').mean()['AverageTemperature'].plot()
  > # 用滑动均值平滑图像
  > climate_sub_us.groupby('year').mean()['AverageTemperature'].rolling(10).mean().plot()
  > ## 好多了！可以看出气温随年份上升的趋势
  > ```

  > ⭕️ 可以进行的操作：
  >
  > 请记住，在定距等级上可以进行加减，这改变了整个游戏规则。既然可以把值加在一起，就 能引入两个熟悉的概念：**算术平均数（就是均值）和标准差**。
  >
  > 转用**直方图可视化**：直方图是条形图的“近亲”，**用不同的桶包含不同的数据**，对数据的频率进行可视化。

- **定比等级（ratio level）**

  - 最终，我们到达了最高的等级：定比等级。在这个等级上，可以说我们拥有最高程度的控制和数学运算能力。和定距等级一样，我们在定比等级上处理的也是定量数据。这里**不仅继承了定距等级的加减运算，而且有了一个绝对零点的概念，可以做乘除运算**。

  > ⭕️ 可以进行的操作：
  >
  > 在定比等级，我们可以进行**乘除运算**。虽然看起来没什么大不了，但是这些运算可以让我们 对这个等级上的数据进行独特的观察，而这在低等级上是无法做到的。*例如，当处理金融数据时，我们几乎肯定要计算一些货币的值。货币处于定比等级，因为“零资金” 这个概念可以存在。那么我们就可以说：\$100 是\$50 的两倍，因为 100 / 50 = 2；工资最高的员工比工资最低的员工多赚近 13 倍。多亏了定比等级，我们才能知道这件事情！*

![](https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/lS9W57.png)

![](https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/rYIp41.png)

![](https://gitee.com/echisenyang/GiteeForUpicUse/raw/master/uPic/XPAPl6.png)
