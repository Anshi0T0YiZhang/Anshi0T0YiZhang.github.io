---
layout:     post
title:      "Climbing Pit Guide"
subtitle:   " \"记录个人的爬坑路线\""
date:       2017-10-17 19:40:00
author:     "WQ"
header-img: "img/blogImg/my-life.jpg"
catalog: true
tags:
    - Solr
    - Fuck
---


# 遇到的坑

## Solr-Synonyms

使用solr同义词遇到的坑！

由于对solr的不了解在使用同义词的过程中遇到了很多坑。我所使用的是在query添加同义词过滤。
1. solr的同义词分为两种，index时和search时。这两种的优缺点自行Google。
2. 注意字段的配置类型，必须能够进行分词，如果是中文就需要配置相关的中文分词器。
3. 被分词过后的term才会进行同义词匹配，所以注意配置的同义词在经过分词器之后已久为一个词，如‘你的’在经过分词之后为‘你’和‘的’（不去常用词），
那么如果你配置‘你的’的同义词为‘我的’那么久不会起作用。
4. 在使用solr自带的工具analysis进行分词测试时发现是ok的，但是在实际的query中却查询不到。举个例子。如存储同义词`wa => 王强`，使用的是ik分词器
由于在分词阶段将王强分解成‘王’和‘强’，但是在查询wa是转换成‘王强’这个词了，并已改词去进行匹配，所以匹配不到。解决的方式是使用拓展词。该问题在[这儿](https://segmentfault.com/q/1010000011341446/a-1020000011357024)
5. 由于同义词无法实现热更新，需要重启服务，所以对于经常需要更新的业务不是很适合。